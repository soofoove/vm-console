<div class="topbar">
  <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
    <div>
      <h3 class="mb-1">{{ pageTitle }}</h3>
      <div class="text-muted-2">{{ pageSubtitle }}</div>
    </div>

    <div class="d-flex flex-wrap gap-2 align-items-center justify-content-end">
      <input
        class="form-control input-ios"
        style="min-width: 260px;"
        placeholder="Search by name / IP / tagâ€¦"
        [(ngModel)]="search"
        (input)="onSearchChange()"
        (focus)="onSearchFocus()"
      />

      <div class="segmented" id="segmentedScope">
        <button class="btn" type="button" [class.active]="scope === 'all'" (click)="setScope('all')">All</button>
        <button class="btn" type="button" [class.active]="scope === 'active'" (click)="setScope('active')">Active</button>
        <button class="btn" type="button" [class.active]="scope === 'expiring'" (click)="setScope('expiring')">Expiring</button>
      </div>

      <button
        class="btn btn-ios position-relative"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasNotifications"
      >
        Notifications
        <span
          class="position-absolute top-0 start-100 translate-middle badge rounded-pill"
          style="background: var(--red);"
        >
          {{ (unreadCount$ | async) ?? 0 }}
        </span>
      </button>

      <div class="segmented" id="segmentedTheme" title="Theme">
        <button class="btn" type="button" [class.active]="theme === 'light'" (click)="setTheme('light')">Light</button>
        <button class="btn" type="button" [class.active]="theme === 'dark'" (click)="setTheme('dark')">Dark</button>
      </div>

      <div class="dropdown">
        <button
          class="btn btn-ios dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
          #userDropdownToggle
        >
          Mykhailo
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li>
            <button class="dropdown-item" type="button" (click)="mockLogin()">Switch user (mock)</button>
          </li>
          <li>
            <button class="dropdown-item" type="button" (click)="exportEvents()">Export events (mock)</button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
